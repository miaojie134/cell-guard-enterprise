import{y as o,j as e,L as P,x as Pe,E as z,G as Re,H as X,N as ee,D,aj as L,ak as Te,K as Ee,al as Ae,am as Le,an as De,ao as _e,ap as He,r as Q,ad as ze,u as Ie,b as We,M as $,B as le,C,d as W,e as O,a6 as U,g as y,aq as Oe,ar as Ue,af as Be,as as Me,at as ke,au as G,av as K}from"./index-CtZ2PKlW.js";import{v as Xe}from"./verificationService-B0VH615L.js";import{A as Ye}from"./arrow-left-DxTLDNlc.js";import{a as Ve,C as Fe}from"./clock-CTH7TFfH.js";const B=o.forwardRef(({className:r,...s},t)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:t,className:P("w-full caption-bottom text-sm",r),...s})}));B.displayName="Table";const M=o.forwardRef(({className:r,...s},t)=>e.jsx("thead",{ref:t,className:P("[&_tr]:border-b",r),...s}));M.displayName="TableHeader";const k=o.forwardRef(({className:r,...s},t)=>e.jsx("tbody",{ref:t,className:P("[&_tr:last-child]:border-0",r),...s}));k.displayName="TableBody";const qe=o.forwardRef(({className:r,...s},t)=>e.jsx("tfoot",{ref:t,className:P("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...s}));qe.displayName="TableFooter";const T=o.forwardRef(({className:r,...s},t)=>e.jsx("tr",{ref:t,className:P("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...s}));T.displayName="TableRow";const b=o.forwardRef(({className:r,...s},t)=>e.jsx("th",{ref:t,className:P("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...s}));b.displayName="TableHead";const j=o.forwardRef(({className:r,...s},t)=>e.jsx("td",{ref:t,className:P("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...s}));j.displayName="TableCell";const $e=o.forwardRef(({className:r,...s},t)=>e.jsx("caption",{ref:t,className:P("mt-4 text-sm text-muted-foreground",r),...s}));$e.displayName="TableCaption";function Ge(r,s){return o.useReducer((t,n)=>s[t][n]??t,r)}var oe="ScrollArea",[he,fr]=Pe(oe),[Ke,N]=he(oe),xe=o.forwardRef((r,s)=>{const{__scopeScrollArea:t,type:n="hover",dir:l,scrollHideDelay:a=600,...i}=r,[c,d]=o.useState(null),[x,h]=o.useState(null),[f,m]=o.useState(null),[p,g]=o.useState(null),[E,u]=o.useState(null),[w,A]=o.useState(0),[se,Y]=o.useState(0),[V,I]=o.useState(!1),[F,q]=o.useState(!1),v=z(s,_=>d(_)),S=Re(l);return e.jsx(Ke,{scope:t,type:n,dir:S,scrollHideDelay:a,scrollArea:c,viewport:x,onViewportChange:h,content:f,onContentChange:m,scrollbarX:p,onScrollbarXChange:g,scrollbarXEnabled:V,onScrollbarXEnabledChange:I,scrollbarY:E,onScrollbarYChange:u,scrollbarYEnabled:F,onScrollbarYEnabledChange:q,onCornerWidthChange:A,onCornerHeightChange:Y,children:e.jsx(X.div,{dir:S,...i,ref:v,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":se+"px",...r.style}})})});xe.displayName=oe;var me="ScrollAreaViewport",ue=o.forwardRef((r,s)=>{const{__scopeScrollArea:t,children:n,asChild:l,nonce:a,...i}=r,c=N(me,t),d=o.useRef(null),x=z(s,d,c.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:`
[data-radix-scroll-area-viewport] {
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
}
[data-radix-scroll-area-viewport]::-webkit-scrollbar {
  display: none;
}
:where([data-radix-scroll-area-viewport]) {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
:where([data-radix-scroll-area-content]) {
  flex-grow: 1;
}
`},nonce:a}),e.jsx(X.div,{"data-radix-scroll-area-viewport":"",...i,asChild:l,ref:x,style:{overflowX:c.scrollbarXEnabled?"scroll":"hidden",overflowY:c.scrollbarYEnabled?"scroll":"hidden",...r.style},children:or({asChild:l,children:n},h=>e.jsx("div",{"data-radix-scroll-area-content":"",ref:c.onContentChange,style:{minWidth:c.scrollbarXEnabled?"fit-content":void 0},children:h}))})]})});ue.displayName=me;var R="ScrollAreaScrollbar",ae=o.forwardRef((r,s)=>{const{forceMount:t,...n}=r,l=N(R,r.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:i}=l,c=r.orientation==="horizontal";return o.useEffect(()=>(c?a(!0):i(!0),()=>{c?a(!1):i(!1)}),[c,a,i]),l.type==="hover"?e.jsx(Qe,{...n,ref:s,forceMount:t}):l.type==="scroll"?e.jsx(Je,{...n,ref:s,forceMount:t}):l.type==="auto"?e.jsx(fe,{...n,ref:s,forceMount:t}):l.type==="always"?e.jsx(ce,{...n,ref:s}):null});ae.displayName=R;var Qe=o.forwardRef((r,s)=>{const{forceMount:t,...n}=r,l=N(R,r.__scopeScrollArea),[a,i]=o.useState(!1);return o.useEffect(()=>{const c=l.scrollArea;let d=0;if(c){const x=()=>{window.clearTimeout(d),i(!0)},h=()=>{d=window.setTimeout(()=>i(!1),l.scrollHideDelay)};return c.addEventListener("pointerenter",x),c.addEventListener("pointerleave",h),()=>{window.clearTimeout(d),c.removeEventListener("pointerenter",x),c.removeEventListener("pointerleave",h)}}},[l.scrollArea,l.scrollHideDelay]),e.jsx(ee,{present:t||a,children:e.jsx(fe,{"data-state":a?"visible":"hidden",...n,ref:s})})}),Je=o.forwardRef((r,s)=>{const{forceMount:t,...n}=r,l=N(R,r.__scopeScrollArea),a=r.orientation==="horizontal",i=te(()=>d("SCROLL_END"),100),[c,d]=Ge("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return o.useEffect(()=>{if(c==="idle"){const x=window.setTimeout(()=>d("HIDE"),l.scrollHideDelay);return()=>window.clearTimeout(x)}},[c,l.scrollHideDelay,d]),o.useEffect(()=>{const x=l.viewport,h=a?"scrollLeft":"scrollTop";if(x){let f=x[h];const m=()=>{const p=x[h];f!==p&&(d("SCROLL"),i()),f=p};return x.addEventListener("scroll",m),()=>x.removeEventListener("scroll",m)}},[l.viewport,a,d,i]),e.jsx(ee,{present:t||c!=="hidden",children:e.jsx(ce,{"data-state":c==="hidden"?"hidden":"visible",...n,ref:s,onPointerEnter:D(r.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:D(r.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),fe=o.forwardRef((r,s)=>{const t=N(R,r.__scopeScrollArea),{forceMount:n,...l}=r,[a,i]=o.useState(!1),c=r.orientation==="horizontal",d=te(()=>{if(t.viewport){const x=t.viewport.offsetWidth<t.viewport.scrollWidth,h=t.viewport.offsetHeight<t.viewport.scrollHeight;i(c?x:h)}},10);return H(t.viewport,d),H(t.content,d),e.jsx(ee,{present:n||a,children:e.jsx(ce,{"data-state":a?"visible":"hidden",...l,ref:s})})}),ce=o.forwardRef((r,s)=>{const{orientation:t="vertical",...n}=r,l=N(R,r.__scopeScrollArea),a=o.useRef(null),i=o.useRef(0),[c,d]=o.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),x=ge(c.viewport,c.content),h={...n,sizes:c,onSizesChange:d,hasThumb:x>0&&x<1,onThumbChange:m=>a.current=m,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:m=>i.current=m};function f(m,p){return lr(m,i.current,c,p)}return t==="horizontal"?e.jsx(Ze,{...h,ref:s,onThumbPositionChange:()=>{if(l.viewport&&a.current){const m=l.viewport.scrollLeft,p=de(m,c,l.dir);a.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:m=>{l.viewport&&(l.viewport.scrollLeft=m)},onDragScroll:m=>{l.viewport&&(l.viewport.scrollLeft=f(m,l.dir))}}):t==="vertical"?e.jsx(er,{...h,ref:s,onThumbPositionChange:()=>{if(l.viewport&&a.current){const m=l.viewport.scrollTop,p=de(m,c);a.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:m=>{l.viewport&&(l.viewport.scrollTop=m)},onDragScroll:m=>{l.viewport&&(l.viewport.scrollTop=f(m))}}):null}),Ze=o.forwardRef((r,s)=>{const{sizes:t,onSizesChange:n,...l}=r,a=N(R,r.__scopeScrollArea),[i,c]=o.useState(),d=o.useRef(null),x=z(s,d,a.onScrollbarXChange);return o.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),e.jsx(be,{"data-orientation":"horizontal",...l,ref:x,sizes:t,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":re(t)+"px",...r.style},onThumbPointerDown:h=>r.onThumbPointerDown(h.x),onDragScroll:h=>r.onDragScroll(h.x),onWheelScroll:(h,f)=>{if(a.viewport){const m=a.viewport.scrollLeft+h.deltaX;r.onWheelScroll(m),Ne(m,f)&&h.preventDefault()}},onResize:()=>{d.current&&a.viewport&&i&&n({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:Z(i.paddingLeft),paddingEnd:Z(i.paddingRight)}})}})}),er=o.forwardRef((r,s)=>{const{sizes:t,onSizesChange:n,...l}=r,a=N(R,r.__scopeScrollArea),[i,c]=o.useState(),d=o.useRef(null),x=z(s,d,a.onScrollbarYChange);return o.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),e.jsx(be,{"data-orientation":"vertical",...l,ref:x,sizes:t,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":re(t)+"px",...r.style},onThumbPointerDown:h=>r.onThumbPointerDown(h.y),onDragScroll:h=>r.onDragScroll(h.y),onWheelScroll:(h,f)=>{if(a.viewport){const m=a.viewport.scrollTop+h.deltaY;r.onWheelScroll(m),Ne(m,f)&&h.preventDefault()}},onResize:()=>{d.current&&a.viewport&&i&&n({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:Z(i.paddingTop),paddingEnd:Z(i.paddingBottom)}})}})}),[rr,pe]=he(R),be=o.forwardRef((r,s)=>{const{__scopeScrollArea:t,sizes:n,hasThumb:l,onThumbChange:a,onThumbPointerUp:i,onThumbPointerDown:c,onThumbPositionChange:d,onDragScroll:x,onWheelScroll:h,onResize:f,...m}=r,p=N(R,t),[g,E]=o.useState(null),u=z(s,v=>E(v)),w=o.useRef(null),A=o.useRef(""),se=p.viewport,Y=n.content-n.viewport,V=L(h),I=L(d),F=te(f,10);function q(v){if(w.current){const S=v.clientX-w.current.left,_=v.clientY-w.current.top;x({x:S,y:_})}}return o.useEffect(()=>{const v=S=>{const _=S.target;(g==null?void 0:g.contains(_))&&V(S,Y)};return document.addEventListener("wheel",v,{passive:!1}),()=>document.removeEventListener("wheel",v,{passive:!1})},[se,g,Y,V]),o.useEffect(I,[n,I]),H(g,F),H(p.content,F),e.jsx(rr,{scope:t,scrollbar:g,hasThumb:l,onThumbChange:L(a),onThumbPointerUp:L(i),onThumbPositionChange:I,onThumbPointerDown:L(c),children:e.jsx(X.div,{...m,ref:u,style:{position:"absolute",...m.style},onPointerDown:D(r.onPointerDown,v=>{v.button===0&&(v.target.setPointerCapture(v.pointerId),w.current=g.getBoundingClientRect(),A.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),q(v))}),onPointerMove:D(r.onPointerMove,q),onPointerUp:D(r.onPointerUp,v=>{const S=v.target;S.hasPointerCapture(v.pointerId)&&S.releasePointerCapture(v.pointerId),document.body.style.webkitUserSelect=A.current,p.viewport&&(p.viewport.style.scrollBehavior=""),w.current=null})})})}),J="ScrollAreaThumb",je=o.forwardRef((r,s)=>{const{forceMount:t,...n}=r,l=pe(J,r.__scopeScrollArea);return e.jsx(ee,{present:t||l.hasThumb,children:e.jsx(tr,{ref:s,...n})})}),tr=o.forwardRef((r,s)=>{const{__scopeScrollArea:t,style:n,...l}=r,a=N(J,t),i=pe(J,t),{onThumbPositionChange:c}=i,d=z(s,f=>i.onThumbChange(f)),x=o.useRef(),h=te(()=>{x.current&&(x.current(),x.current=void 0)},100);return o.useEffect(()=>{const f=a.viewport;if(f){const m=()=>{if(h(),!x.current){const p=nr(f,c);x.current=p,c()}};return c(),f.addEventListener("scroll",m),()=>f.removeEventListener("scroll",m)}},[a.viewport,h,c]),e.jsx(X.div,{"data-state":i.hasThumb?"visible":"hidden",...l,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:D(r.onPointerDownCapture,f=>{const p=f.target.getBoundingClientRect(),g=f.clientX-p.left,E=f.clientY-p.top;i.onThumbPointerDown({x:g,y:E})}),onPointerUp:D(r.onPointerUp,i.onThumbPointerUp)})});je.displayName=J;var ie="ScrollAreaCorner",ve=o.forwardRef((r,s)=>{const t=N(ie,r.__scopeScrollArea),n=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&n?e.jsx(sr,{...r,ref:s}):null});ve.displayName=ie;var sr=o.forwardRef((r,s)=>{const{__scopeScrollArea:t,...n}=r,l=N(ie,t),[a,i]=o.useState(0),[c,d]=o.useState(0),x=!!(a&&c);return H(l.scrollbarX,()=>{var f;const h=((f=l.scrollbarX)==null?void 0:f.offsetHeight)||0;l.onCornerHeightChange(h),d(h)}),H(l.scrollbarY,()=>{var f;const h=((f=l.scrollbarY)==null?void 0:f.offsetWidth)||0;l.onCornerWidthChange(h),i(h)}),x?e.jsx(X.div,{...n,ref:s,style:{width:a,height:c,position:"absolute",right:l.dir==="ltr"?0:void 0,left:l.dir==="rtl"?0:void 0,bottom:0,...r.style}}):null});function Z(r){return r?parseInt(r,10):0}function ge(r,s){const t=r/s;return isNaN(t)?0:t}function re(r){const s=ge(r.viewport,r.content),t=r.scrollbar.paddingStart+r.scrollbar.paddingEnd,n=(r.scrollbar.size-t)*s;return Math.max(n,18)}function lr(r,s,t,n="ltr"){const l=re(t),a=l/2,i=s||a,c=l-i,d=t.scrollbar.paddingStart+i,x=t.scrollbar.size-t.scrollbar.paddingEnd-c,h=t.content-t.viewport,f=n==="ltr"?[0,h]:[h*-1,0];return we([d,x],f)(r)}function de(r,s,t="ltr"){const n=re(s),l=s.scrollbar.paddingStart+s.scrollbar.paddingEnd,a=s.scrollbar.size-l,i=s.content-s.viewport,c=a-n,d=t==="ltr"?[0,i]:[i*-1,0],x=Ee(r,d);return we([0,i],[0,c])(x)}function we(r,s){return t=>{if(r[0]===r[1]||s[0]===s[1])return s[0];const n=(s[1]-s[0])/(r[1]-r[0]);return s[0]+n*(t-r[0])}}function Ne(r,s){return r>0&&r<s}var nr=(r,s=()=>{})=>{let t={left:r.scrollLeft,top:r.scrollTop},n=0;return function l(){const a={left:r.scrollLeft,top:r.scrollTop},i=t.left!==a.left,c=t.top!==a.top;(i||c)&&s(),t=a,n=window.requestAnimationFrame(l)}(),()=>window.cancelAnimationFrame(n)};function te(r,s){const t=L(r),n=o.useRef(0);return o.useEffect(()=>()=>window.clearTimeout(n.current),[]),o.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(t,s)},[t,s])}function H(r,s){const t=L(s);Te(()=>{let n=0;if(r){const l=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(t)});return l.observe(r),()=>{window.cancelAnimationFrame(n),l.unobserve(r)}}},[r,t])}function or(r,s){const{asChild:t,children:n}=r;if(!t)return typeof s=="function"?s(n):s;const l=o.Children.only(n);return o.cloneElement(l,{children:typeof s=="function"?s(l.props.children):s})}var Se=xe,ar=ue,cr=ve;const Ce=o.forwardRef(({className:r,children:s,...t},n)=>e.jsxs(Se,{ref:n,className:P("relative overflow-hidden",r),...t,children:[e.jsx(ar,{className:"h-full w-full rounded-[inherit]",children:s}),e.jsx(ye,{}),e.jsx(cr,{})]}));Ce.displayName=Se.displayName;const ye=o.forwardRef(({className:r,orientation:s="vertical",...t},n)=>e.jsx(ae,{ref:n,orientation:s,className:P("flex touch-none select-none transition-colors",s==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",s==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",r),...t,children:e.jsx(je,{className:"relative flex-1 rounded-full bg-border"})}));ye.displayName=ae.displayName;const ir=({isOpen:r,onClose:s,user:t})=>{var n;return t?e.jsx(Ae,{open:r,onOpenChange:s,children:e.jsxs(Le,{className:"sm:max-w-[425px]",children:[e.jsxs(De,{children:[e.jsxs(_e,{children:["待确认号码 - ",t.fullName]}),e.jsxs(He,{children:["以下是员工 ",t.fullName," (",t.email,") 所有待确认的手机号码。"]})]}),e.jsx(Ce,{className:"h-72 w-full rounded-md border p-4",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[(n=t.pendingPhones)==null?void 0:n.map(l=>e.jsx(Q,{variant:"secondary",className:"text-base",children:l.phoneNumber},l.id)),(!t.pendingPhones||t.pendingPhones.length===0)&&e.jsx("p",{className:"text-sm text-gray-500",children:"该用户没有待确认的号码。"})]})})]})}):null},ne=5,pr=()=>{var c,d,x,h,f,m,p,g,E;const{batchId:r}=ze(),s=Ie(),[t,n]=o.useState(null),{data:l,isLoading:a,error:i}=We({queryKey:["verification","results",r],queryFn:()=>{if(!r)throw new Error("缺少批处理ID");return Xe.getResults(r)},enabled:!!r});return a?e.jsx($,{title:"盘点结果",children:e.jsx("div",{className:"text-center p-6",children:"加载中..."})}):i?e.jsx($,{title:"盘点结果",children:e.jsxs("div",{className:"text-center p-6 text-red-500",children:["加载失败: ",i.message]})}):l?e.jsxs($,{title:`盘点结果 (批次: ${r})`,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs(le,{variant:"outline",size:"sm",onClick:()=>s(-1),children:[e.jsx(Ye,{className:"h-4 w-4 mr-2"}),"返回"]})}),e.jsxs(C,{children:[e.jsxs(W,{children:[e.jsx(O,{children:"盘点结果摘要"}),e.jsx(U,{children:"本次盘点任务的总体结果概览"})]}),e.jsx(y,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3",children:[e.jsx(C,{children:e.jsx(y,{className:"pt-4 pb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Oe,{className:"h-6 w-6 text-blue-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"总号码数"}),e.jsx("p",{className:"text-xl font-bold",children:((c=l.summary)==null?void 0:c.totalPhonesCount)||0})]})]})})}),e.jsx(C,{children:e.jsx(y,{className:"pt-4 pb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ve,{className:"h-6 w-6 text-green-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"已确认"}),e.jsx("p",{className:"text-xl font-bold",children:((d=l.summary)==null?void 0:d.confirmedPhonesCount)||0})]})]})})}),e.jsx(C,{children:e.jsx(y,{className:"pt-4 pb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ue,{className:"h-6 w-6 text-red-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"有问题"}),e.jsx("p",{className:"text-xl font-bold",children:((x=l.summary)==null?void 0:x.reportedIssuesCount)||0})]})]})})}),e.jsx(C,{children:e.jsx(y,{className:"pt-4 pb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Fe,{className:"h-6 w-6 text-yellow-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"待确认"}),e.jsx("p",{className:"text-xl font-bold",children:((h=l.summary)==null?void 0:h.pendingPhonesCount)||0})]})]})})}),e.jsx(C,{children:e.jsx(y,{className:"pt-4 pb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Be,{className:"h-6 w-6 text-purple-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"新上报"}),e.jsx("p",{className:"text-xl font-bold",children:((f=l.summary)==null?void 0:f.newlyReportedPhonesCount)||0})]})]})})})]})})]}),e.jsx("div",{className:"w-full",children:e.jsxs(Me,{defaultValue:"pending",className:"w-full",children:[e.jsxs(ke,{className:"grid w-full grid-cols-4 h-9",children:[e.jsxs(G,{value:"pending",className:"text-xs",children:["待确认用户 (",((m=l.pendingUsers)==null?void 0:m.length)||0,")"]}),e.jsxs(G,{value:"confirmed",className:"text-xs",children:["已确认号码 (",((p=l.summary)==null?void 0:p.confirmedPhonesCount)||0,")"]}),e.jsxs(G,{value:"issues",className:"text-xs",children:["问题报告 (",((g=l.summary)==null?void 0:g.reportedIssuesCount)||0,")"]}),e.jsxs(G,{value:"unlisted",className:"text-xs",children:["新上报号码 (",((E=l.summary)==null?void 0:E.newlyReportedPhonesCount)||0,")"]})]}),e.jsx(K,{value:"confirmed",className:"mt-3",children:e.jsxs(C,{children:[e.jsxs(W,{className:"pb-3",children:[e.jsx(O,{className:"text-lg",children:"已确认号码列表"}),e.jsx(U,{className:"text-sm",children:"员工已确认正在使用的手机号码"})]}),e.jsxs(y,{children:[e.jsxs(B,{children:[e.jsx(M,{children:e.jsxs(T,{children:[e.jsx(b,{className:"text-xs",children:"手机号码"}),e.jsx(b,{className:"text-xs",children:"部门"}),e.jsx(b,{className:"text-xs",children:"当前用户"}),e.jsx(b,{className:"text-xs",children:"用途"}),e.jsx(b,{className:"text-xs",children:"确认人"}),e.jsx(b,{className:"text-xs",children:"确认时间"})]})}),e.jsx(k,{children:(l.confirmedPhones||[]).map(u=>e.jsxs(T,{children:[e.jsx(j,{className:"font-medium text-sm",children:u.phoneNumber}),e.jsx(j,{className:"text-sm",children:u.department}),e.jsx(j,{className:"text-sm",children:u.currentUser}),e.jsx(j,{className:"text-sm",children:u.purpose}),e.jsx(j,{className:"text-sm",children:u.confirmedBy}),e.jsx(j,{className:"text-sm",children:new Date(u.confirmedAt).toLocaleString("zh-CN")})]},u.id))})]}),(l.confirmedPhones||[]).length===0&&e.jsx("div",{className:"text-center py-6 text-gray-500 text-sm",children:"暂无已确认号码"})]})]})}),e.jsx(K,{value:"issues",className:"mt-3",children:e.jsxs(C,{children:[e.jsxs(W,{className:"pb-3",children:[e.jsx(O,{className:"text-lg",children:"问题报告列表"}),e.jsx(U,{className:"text-sm",children:"员工报告存在问题的手机号码"})]}),e.jsxs(y,{children:[e.jsxs(B,{children:[e.jsx(M,{children:e.jsxs(T,{children:[e.jsx(b,{className:"text-xs",children:"手机号码"}),e.jsx(b,{className:"text-xs",children:"报告人"}),e.jsx(b,{className:"text-xs",children:"问题描述"}),e.jsx(b,{className:"text-xs",children:"报告时间"}),e.jsx(b,{className:"text-xs",children:"处理状态"}),e.jsx(b,{className:"text-xs",children:"操作"})]})}),e.jsx(k,{children:(l.reportedIssues||[]).map(u=>e.jsxs(T,{children:[e.jsx(j,{className:"font-medium text-sm",children:u.phoneNumber}),e.jsx(j,{className:"text-sm",children:u.reportedBy}),e.jsx(j,{className:"text-sm",children:u.comment}),e.jsx(j,{className:"text-sm",children:new Date(u.reportedAt).toLocaleString("zh-CN")}),e.jsx(j,{children:e.jsx(Q,{variant:u.adminActionStatus==="pending"?"destructive":"default",children:u.adminActionStatus==="pending"?"待处理":"已处理"})}),e.jsx(j,{children:e.jsx(le,{variant:"outline",size:"sm",children:"处理"})})]},u.issueId))})]}),(l.reportedIssues||[]).length===0&&e.jsx("div",{className:"text-center py-6 text-gray-500 text-sm",children:"暂无问题报告"})]})]})}),e.jsx(K,{value:"pending",className:"mt-3",children:e.jsxs(C,{children:[e.jsxs(W,{className:"pb-3",children:[e.jsx(O,{className:"text-lg",children:"待确认用户列表"}),e.jsx(U,{className:"text-sm",children:"尚未完成确认的员工及其需要确认的号码"})]}),e.jsxs(y,{children:[e.jsxs(B,{children:[e.jsx(M,{children:e.jsxs(T,{children:[e.jsx(b,{className:"text-xs",children:"员工信息"}),e.jsx(b,{className:"text-xs",children:"待确认号码"}),e.jsx(b,{className:"text-xs",children:"链接过期时间"}),e.jsx(b,{className:"text-xs",children:"操作"})]})}),e.jsx(k,{children:(l.pendingUsers||[]).map(u=>{var w;return e.jsxs(T,{children:[e.jsxs(j,{children:[e.jsx("div",{className:"font-medium text-sm",children:u.fullName}),e.jsx("div",{className:"text-xs text-gray-500",children:u.email})]}),e.jsx(j,{children:e.jsxs("div",{className:"flex flex-wrap items-center gap-1 cursor-pointer",onClick:()=>n(u),children:[(w=u.pendingPhones)==null?void 0:w.slice(0,ne).map(A=>e.jsx(Q,{variant:"outline",children:A.phoneNumber},A.id)),u.pendingPhones&&u.pendingPhones.length>ne&&e.jsxs(Q,{variant:"default",children:["+",u.pendingPhones.length-ne]}),(!u.pendingPhones||u.pendingPhones.length===0)&&e.jsx("span",{className:"text-xs text-gray-500",children:"无号码信息"})]})}),e.jsx(j,{className:"text-sm",children:new Date(u.expiresAt).toLocaleString("zh-CN")}),e.jsx(j,{children:e.jsx(le,{variant:"outline",size:"sm",children:"提醒"})})]},u.employeeId)})})]}),(l.pendingUsers||[]).length===0&&e.jsx("div",{className:"text-center py-6 text-gray-500 text-sm",children:"所有用户均已确认"})]})]})}),e.jsx(K,{value:"unlisted",className:"mt-3",children:e.jsxs(C,{children:[e.jsxs(W,{className:"pb-3",children:[e.jsx(O,{className:"text-lg",children:"新上报号码列表"}),e.jsx(U,{className:"text-sm",children:"员工上报的未在系统中列出的号码"})]}),e.jsxs(y,{children:[e.jsxs(B,{children:[e.jsx(M,{children:e.jsxs(T,{children:[e.jsx(b,{className:"text-xs",children:"手机号码"}),e.jsx(b,{className:"text-xs",children:"用途说明"}),e.jsx(b,{className:"text-xs",children:"备注"}),e.jsx(b,{className:"text-xs",children:"上报时间"})]})}),e.jsx(k,{children:(l.unlistedNumbers||[]).map((u,w)=>e.jsxs(T,{children:[e.jsx(j,{className:"font-medium text-sm",children:u.phoneNumber}),e.jsx(j,{className:"text-sm",children:u.purpose}),e.jsx(j,{className:"max-w-xs truncate text-sm",children:u.userComment||"-"}),e.jsx(j,{className:"text-sm",children:u.reportedAt?new Date(u.reportedAt).toLocaleString("zh-CN"):"-"})]},w))})]}),(l.unlistedNumbers||[]).length===0&&e.jsx("div",{className:"text-center py-6 text-gray-500 text-sm",children:"暂无新上报号码"})]})]})})]})})]}),e.jsx(ir,{isOpen:!!t,onClose:()=>n(null),user:t})]}):e.jsx($,{title:"盘点结果",children:e.jsx("div",{className:"text-center p-6",children:"没有找到盘点结果"})})};export{pr as default};
